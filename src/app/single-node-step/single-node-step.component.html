<div class="card" [attr.name]="data.name" #canvasContent ngFlowchartCanvas>
  <div>
    <ng-container *ngIf="!data.isEditingTitle">
      <strong style="float: left;">{{ data.title }}</strong>
      <a class="ms-2" href="javascript:void(0)" (click)="data.isEditingTitle = !data.isEditingTitle">Edit title</a>
    </ng-container>
    <ng-container *ngIf="data.isEditingTitle">
      <input [(ngModel)]="data.title" type="text">
      <a class="ms-2" href="javascript:void(0)" (click)="data.isEditingTitle = !data.isEditingTitle">Save</a>
    </ng-container>
    <div style="float: right;"><a href="javascript:void(0)" (click)="onDelete()">Delete</a></div>
  </div>
  <hr class="mb-3">
  <table>
    <tr>
      <td>Id</td>
      <td>{{ data.name }}</td>
    </tr>
    <tr>
      <td>Type</td>
      <td>
        <select (change)="changeNodeType($event)">
          <option *ngFor="let nodeType of nodeTypes" [selected]="data.nodeType === nodeType">
            {{ nodeType }}
          </option>
        </select>
      </td>
    </tr>
  </table>
  <div *ngIf="data.nodeType === 'detector'">
    <div *ngIf="!data.isEditing">
      <span>{{ data.detectorId }}</span>
      <a class="ms-2" href="javascript:void(0)" (click)="editDetector()">Edit</a>
    </div>
    <div *ngIf="data.isEditing">
      <select (change)="selectDetector($event)">
        <option *ngFor="let detector of detectors" [selected]="data.detectorId === detector">
          {{ detector }}
        </option>
      </select>
      <input class="ms-2" type="button" value="Save" (click)="saveDetector()">
    </div>
  </div>
  <div *ngIf="data.nodeType === 'kustoQuery'">
    <input class="mt-3" type="button" value="Configure Kusto Query" (click)="configureKustoQuery()">
  </div>
  <mat-accordion class="mt-3">
    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Define Variables
        </mat-panel-title>
        <mat-panel-description>
          This can be used to define variables that can be used in conditions in workflow
        </mat-panel-description>
      </mat-expansion-panel-header>
      <table>
        <tr>
          <th>Name</th>
          <th>DataType</th>
          <th>Value</th>
        </tr>
        <tr>
          <td><input type="text"></td>
          <td>
            <select>
              <option>String</option>
              <option>Int</option>
              <option>Double</option>
              <option>Boolean</option>
            </select>
          </td>
          <td><input type="text"></td>
        </tr>
      </table>
    </mat-expansion-panel>
  </mat-accordion>

  <div class="mt-5">
    <input type="button" value="Add Condition" (click)="addCondition()" [disabled]="isDisabled()">
    <input class="ms-2" type="button" value="Add Switch Condition" (click)="addSwitchCondition()"
      [disabled]="isDisabled()">
    <input class="ms-2" type="button" value="Add Detector" (click)="addDetector()" [disabled]="isDisabled()">
  </div>
</div>